<!DOCTYPE HTML>

<html>

<!--
the player character should take ~ 3.6 seconds to run the map from left to right (785 pixls)
player speed=1.5  , vilocity = 222   px/s
zomby speed =1.2  , vilocity = 177.6 px/s
-->
<link rel="icon" href="gameFiles/icon.png" >
<style>
  
/*div{height: 100px;width: 300px;border: 6px solid green;display:inline-block;}*/
canvas{border: 4px solid #173737;background-color: #085422;display: inline-block;}
.life{text-wrap-mode:nowrap;display:block;text-align:start;border: 4px solid black; width:200px;font-size:20px;color:white;}
#floose{display:block;text-align:left;color:#d4ed19;font-size:20px;font-family:Script MT;font-style: italic;}
/*#weapons{display: inline-block; background-color: aliceblue;height: 512px;}*/
body{background-color: #269d77;text-align: center;}
.w{border: 2px solid black;margin-top:50px;}
</style>
<style id="style1">
</style>
<body>

<div id="healthBars" style="position: relative;height: 36px;">


<div  class="life" id="life" style="position: absolute;left: 0px;"><div style="background-color:crimson;">LIFE : 100</div></div> 


<!--div class="life" id="bossLife" style="text-align: right;display: inline-block;width: 50%;height:33px;position:absolute;right: 0px;"></div-->

</div>

<div  id="floose"><div>MONEY : 0$</div>     </div>
<div style="height: 512px;width: 120px;display:inline-block;"></div>
<canvas id="c"></canvas><div  style="height: 512px;width: 80px;display:inline-block;"></div>
<div style="display: inline-block;"> 
<img src="gameFiles/gun.png" class="w" onmousedown='Weapon.currS="";if(Weapon.currentW!="gun"){Weapon.buy("gun",20,"cell")}else{Weapon.currentW="man";document.getElementById("style1").innerHTML="canvas{cursor:default;}"}player.photo=Weapon.currentW+"_"+player.photo.split("_")[1]+Weapon.currS;weponSelected()'>
</img><br><span id="gun">20$</span><br>
<img src="gameFiles/bazooka.png" class="w"
 onmousedown='if(Weapon.currentW!="bazooka"){if(Weapon.buy("bazooka",30,"cell")){Weapon.currS=(bazooka.coolup>=bazooka.cooldown?"":"_0");}}else{Weapon.currentW="man";Weapon.currS="";document.getElementById("style1").innerHTML="canvas{cursor:default;}"}player.photo=Weapon.currentW+"_"+player.photo.split("_")[1]+Weapon.currS;weponSelected()'>
</img><br><span id="bazooka">30$</span><br>
<img src="gameFiles/autoGun.png" class="w" onmousedown='Weapon.currS="";if(Weapon.currentW!="autoGun"){Weapon.buy("autoGun",50,"cell")}else{Weapon.currentW="man";document.getElementById("style1").innerHTML="canvas{cursor:default;}"}player.photo=Weapon.currentW+"_"+player.photo.split("_")[1]+Weapon.currS;weponSelected()'>
</img><br><span id="autoGun">50$</span><br>
<img src="gameFiles/lazer.png" class="w" onmousedown='Weapon.currS="";if(Weapon.currentW!="lazer"){Weapon.buy("lazer",80,"crosshair")}else{Weapon.currentW="man";document.getElementById("style1").innerHTML="canvas{cursor:default;}"}player.photo=Weapon.currentW+"_"+player.photo.split("_")[1]+Weapon.currS;weponSelected()'></img>
<br><span>80$</span></div>
</body>
<!--script src="gameFiles/code/DontDoThat.js"></script--> 
<script src="gameFiles/code/functions.js"></script>
<script src="gameFiles/code/emages.js"></script>
<script src="gameFiles/code/player.js"></script>
<script src="gameFiles/code/Zomby.js"></script>
<script src="gameFiles/code/zox.js"></script>
<script src="gameFiles/code/Mward.js"></script>
<script src="gameFiles/code/bullet.js"></script>
<script>
var c =document.querySelector("canvas");

c.width=828;
c.height=512;
let c2 =c.getContext("2d",{ willReadFrequently: true }); 

var zombykilled=0;
let mode ="mine";
let mony =document.getElementById("floose");
let pointX=0;let pointY=0;
var FPS = 40;


//var Time;var starttime=new Date().getTime();
c.addEventListener("mousedown",event=>
{
  if(Weapon.currentW=="man")
  {
   for(var o=0;o<Mward.b.length;o++)
   {if(calkdistans(Mward.b[o].x,Mward.b[o].y,(event.x-c.offsetLeft),(event.y-c.offsetTop))<45)
   {if(calkdistans(Mward.b[o].x,Mward.b[o].y,player.x,player.y)<70){Mward.b[o].getmined(8);continue;}}}
  
  
  }
  else
  {
    // -------SHOOT---------//
    eval(Weapon.currentW).fire(event.x-c.offsetLeft,event.y-c.offsetTop);
    console.log((event.x-c.offsetLeft)+"  ,"+(event.y-c.offsetTop));
  }
});
 c.addEventListener("mouseup",event=>{if(Weapon.currentW!="man"){eval(Weapon.currentW).stopFiring();}});
 c.addEventListener("mouseleave",event=>{if(Weapon.currentW!="man"){eval(Weapon.currentW).stopFiring();}});
 c.addEventListener("mousemove",event=>{
pointX=(event.x-c.offsetLeft);
pointY=(event.y-c.offsetTop);
 });
</script>
<script src="gameFiles/code/Other.js"></script>
<script src="gameFiles/code/Weapon.js"></script>
<script>
c2.fillStyle="#085422";
let camx=0;
let camy=0;
player.x=c.clientWidth/2
player.y=c.clientHeight/2
Mward.add(20+Math.random()*800,40+Math.random()*450);Mward.add(20+Math.random()*800,40+Math.random()*450)

function time(){//\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\--VOID UPDATE--/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
if(player.life>0){setTimeout(time,1000/FPS);}
else{alert(`\n         DEAD \n\nmoney collected : `+player.mony+"\nzombies killed     : "+zombykilled);return;}
 //requestAnimationFrame(time);
 c2.fillStyle="#085422";
 c2.fillRect(0,0,c.width,c.height);

 if(zombykilled>34){if(zox.exists==0){zox.appear();}}
 Mward.sspawn(1100);
 Other.sspawn();
 Zomby.sspawn(2000,1700);
//Zomby.sspawn(Infinity,1700);
 bullet.sspawn();
 player.spawn();
//checkTheWindow();
}
time();
</script></html>
